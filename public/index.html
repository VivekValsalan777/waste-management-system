<!DOCTYPE html>
<html>
<head>
  <title>Report Waste</title>
</head>
<body>
  <h2>Report Waste</h2>

  <form id="reportForm" enctype="multipart/form-data">
    <input type="file" name="image" required><br><br>
    <input type="hidden" name="latitude" id="lat">
    <input type="hidden" name="longitude" id="lon">
    <button type="submit">Submit</button>
  </form>

  <p id="result"></p>
  <a href="track.html">Track your report</a>

  <script>
    navigator.geolocation.getCurrentPosition(pos => {
      document.getElementById("lat").value = pos.coords.latitude;
      document.getElementById("lon").value = pos.coords.longitude;
    });

    document.getElementById("reportForm").addEventListener("submit", e => {
      e.preventDefault();

      const formData = new FormData(e.target);

      fetch("/submit-report", {
        method: "POST",
        body: formData
      })
      .then(res => res.json())
      .then(data => {
        document.getElementById("result").innerText =
          "Report submitted successfully.\nYour Report ID: " + data.reportId +
          "\nPlease save this ID to track your report.";
      });
    });
  </script>
</body>
</html>
